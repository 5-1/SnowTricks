{% extends 'base.html.twig' %}

{% block body %}
    <style>
        .thumbnail {
            position: relative;
            width: 285px;
            height: 200px;
            overflow: hidden;
        }

        .img-thumbnail {
            position: absolute;
            top: -9999px;
            left: -9999px;
            right: -9999px;
            bottom: -9999px;
            margin: auto;
        }
    </style>

    <div id="header" class="content-block">

        <section class="center">
            <div class="slogan">
                SNOWTRICKS
            </div>
            <div class="secondary-slogan">
                Communauté de Snowboarder.
            </div>
        </section>
    </div><!-- header -->


    <div class="modal" id="delete">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Suppression</h4>
                </div>
                <div class="modal-body">
                    La suppression d'un article étant définitive, veuillez être sûr de votre action.
                </div>
                <div class="modal-footer">
                    <form action="{{ path('trick_delete', {'id': trick.id}) }}" method="post">
                        <input type="hidden" name="token" value="{{ csrf_token('delete-item') }}"/>
                        <a href="{{ path('tricks_show', {'id': trick.id}) }}" class="btn btn-default">
                            <i class="glyphicon glyphicon-chevron-left"></i>
                            Voir la figure
                        </a>
                        <input type="submit" value="Supprimer" class="btn btn-danger"/>

                    </form>
                </div>
            </div>
        </div>
    </div>



    <div class="content-block" id="blog">
        <div class="container blog-sec">
            <header class="block-heading cleafix">
                <a href="{{ path('trick_add') }}" class="btn btn-o btn-lg pull-right">Ajoutez une figure !</a>
                <a href="{{ path('trick_edit', {'id': trick.id}) }}" class="btn btn-o btn-lg pull-right">Editer la
                    figure !</a>
                <a href="" data-toggle="modal" data-target="#delete"
                   class="btn btn-o btn-lg pull-right">Supprimer la figure !</a>


                <div class="title-page">
                    <p class="main-header">{{ trick.title }}</p>
                    <p class="sub-header">Ecrit le {{ trick.createdAt | date('d/m/Y') }}
                        à {{ trick.createdAt | date('H:i') }}</p>
                </div>
            </header>
            <article>
                <div class="container first-content">
                    <div class="row">
                        <div class="col-xs-8 col-md-9 col-xs-push-2 col-md-push-1">
                            <p>
                            <h3>Catégorie: {{ trick.category | raw }} </h3>
                            <h3>Description:</h3> {{ trick.content | raw }}
                            </p>
                        </div>

                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <h2 class="soustitre">
                                    Photos</h2>
                            </div>
                        </div>


                        <div class="row">

                            {% for image in trick.images %}
                                <div class="item {{ (loop.first)? "active":"" }}">
                                    <div class="col-md-3">
                                        <iframe width="100%"
                                        <iframe width="100%" height="100%" src="{{ trick.video }}" frameborder="0"
                                                allowfullscreen>
                                            frameborder="0" allowfullscreen>
                                        </iframe>
                                    </div>

                                    <div class="col-md-3 col-lg-3 col-sm-3">
                                        <a class="thumbnail" style="max-height: 400px" href="#" data-image-id=""
                                           data-toggle="modal" data-title=""
                                           data-image="{{ asset(''~ image.webPath) }}"
                                           data-target="#image-gallery">
                                            <img class="img-thumbnail"
                                                 src="{{ asset(''~ image.webPath) }}"
                                                 alt="Another alt text ( sa marche pas )">

                                        </a>


                                        <div class="modal fade" id="image-gallery" tabindex="-1" role="dialog"
                                             aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-lg">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h4 class="modal-title" id="image-gallery-title"></h4>
                                                        <button type="button" class="close" data-dismiss="modal"><span
                                                                    aria-hidden="true">×</span><span class="sr-only">Close</span>
                                                        </button>
                                                </div>
                                                    <div class="modal-body">
                                                        <img id="image-gallery-image" class="img-responsive col-md-12"
                                                             src="">
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary float-left"
                                                                id="show-previous-image"><i
                                                                    class="fa fa-arrow-left"></i>
                                                        </button>

                                                        <button type="button" id="show-next-image"
                                                                class="btn btn-secondary float-right"><i
                                                                    class="fa fa-arrow-right"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            {% endfor %}

                        </div>


                        <div class="row">
                                <div class="col-xs-12 text-center">
                                    <h2 class="soustitre">
                                        Vidéos</h2>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 text-center">
                                    <div id="carousel-video" class="carousel slide" data-ride="carousel">
                                        <!-- Indicators -->
                                        <ol class="carousel-indicators">
                                            <li data-target="#carousel-video"
                                                data-slide-to="0" class="active"></li>
                                            <li data-target="#carousel-video"
                                                data-slide-to="1"></li>
                                            <li data-target="#carousel-video"
                                                data-slide-to="2"></li>
                                        </ol>
                                        <!-- Wrapper for slides -->

                                        <div class="carousel-inner" role="listbox">
                                            <div class="item active">
                                                <iframe width="1150" height="500"
                                                        src="https://www.youtube.com/embed/watch?v=H1dvF-F1sq0"
                                                        frameborder="0" allowfullscreen></iframe>
                                            </div>
                                            <div class="item">
                                                <iframe width="1150" height="500"
                                                        src="https://www.youtube.com/embed/-ClNrBe-fr4" frameborder="0"
                                                        allowfullscreen></iframe>
                                            </div>
                                            <div class="item">
                                                <iframe width="1150" height="500"
                                                        src="https://www.youtube.com/embed/VXb3IjPh3sI" frameborder="0"
                                                        allowfullscreen></iframe>
                                            </div>
                                        </div>
                                        <!-- Controls -->
                                        <a class="left carousel-control" href="#carousel-video" role="button"
                                           data-slide="prev">
                                            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="right carousel-control" href="#carousel-video" role="button"
                                           data-slide="next">
                                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>

                <section id="commentaires">
                    <h1>Section Commentaire</h1>
                    {% if  app.user %}

                        {{ form_start(commentForm) }}
                        {{ form_row(commentForm.content, {'attr': {'placeholder': "Votre commentaire"}}) }}

                        <button type="submit" class="btn btn-success"> Commenter !</button>
                        {{ form_end(commentForm) }}
                    {% else %}
                        <p> Vous devez vous connectez pour commentez </p>
                    {% endif %}
                    {% for comment in trick.comments() %}

                    <div class="container">


                        <div class="row">
                            <div class="col-sm-1">
                                <div class="thumbnail-comment">
                                    <img class="img-responsive-comment user-photo"
                                         src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
                                </div><!-- /thumbnail -->
                            </div><!-- /col-sm-1 -->

                            <div class="col-sm-5">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <strong>{{ comment.user.username }}</strong> <span
                                                class="text-muted">{{ comment.createdAt | date ('d/m/Y à H:i') }}</span>
                                    </div>
                                    <div class="panel-body">
                                        {{ comment.content | raw }}
                                    </div><!-- /panel-body -->
                                </div><!-- /panel panel-default -->
                            </div><!-- /col-sm-5 -->

                            {% endfor %}


                        </div><!-- /container -->

                    </div>

                </section>


        </div>

    </div><!-- #blog -->

{% endblock %}